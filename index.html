<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TFPCOIN | Polygon Token</title>

  <!-- Logo + Favicons (add these files in /assets) -->
  <link rel="icon" type="image/png" href="assets/favicon.png" />
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png" />
  <meta property="og:image" content="assets/logo.png" />

  <style>
    :root{
      --card: rgba(255,255,255,0.06);
      --stroke: rgba(255,255,255,0.14);
      --muted: rgba(255,255,255,0.72);
      --text:#ffffff;
      --grad: linear-gradient(135deg, #00f5ff, #7f00ff);
      --shadow: 0 18px 70px rgba(0,0,0,0.55);
      --radius: 18px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      background: radial-gradient(circle at top, #0f2027, #000000);
      color: var(--text);
    }
    a{ color: inherit; }
    .wrap{ max-width:1120px; margin:0 auto; padding:28px 16px 60px; }

    header{ padding:28px 0 8px; }
    .topbar{ display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }
    .brand{ display:flex; align-items:center; gap:12px; min-width:260px; }
    .brand img{
      width:52px; height:52px; border-radius:14px; object-fit:cover;
      background: rgba(255,255,255,0.08); border:1px solid var(--stroke);
    }
    .brand h1{ margin:0; font-size:22px; letter-spacing:1px; }
    .brand p{ margin:2px 0 0; color:var(--muted); font-size:13px; }

    .btnrow{ display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:11px 14px; border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,0.06);
      color:#fff; text-decoration:none; font-weight:700;
      cursor:pointer; user-select:none;
    }
    .btn.primary{ background:var(--grad); border:none; color:#06060a; }
    .btn:hover{ opacity:.95; }

    .hero{
      margin-top:18px; padding:22px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,0.05);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }
    .hero h2{ margin:0 0 8px; font-size:28px; }
    .hero p{ margin:0; color:var(--muted); line-height:1.5; max-width:820px; }

    .pillrow{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
    .pill{
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      border-radius:999px;
      padding:8px 10px;
      font-size:12px;
      color: rgba(255,255,255,0.85);
      font-weight:700;
    }
    .pill.good{ background: rgba(0,255,180,0.10); }
    .pill.warn{ background: rgba(255,170,0,0.10); }

    .grid{ display:grid; grid-template-columns:1.1fr 0.9fr; gap:16px; margin-top:16px; }
    @media (max-width:900px){ .grid{ grid-template-columns:1fr; } }

    .card{
      border:1px solid var(--stroke);
      background:var(--card);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 8px 40px rgba(0,0,0,0.25);
    }
    .card h3{ margin:0 0 10px; font-size:18px; }
    .muted{ color:var(--muted); }

    code{
      display:block; padding:10px 12px; border-radius:12px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.35);
      word-break: break-all;
    }

    .line{ height:1px; background: rgba(255,255,255,0.10); margin:14px 0; }

    .list{ margin:10px 0 0 18px; color: rgba(255,255,255,0.85); }
    .list li{ margin-bottom:8px; }

    footer{ margin-top:22px; text-align:center; color: rgba(255,255,255,0.55); font-size:12px; }

    /* Modal */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,0.72);
      display:none; align-items:center; justify-content:center;
      padding:18px; z-index:9999;
    }
    .overlay.open{ display:flex; }
    .modal{
      width:min(980px,96vw);
      max-height:92vh;
      overflow:hidden;
      background:#0b0f14;
      border:1px solid rgba(255,255,255,0.14);
      border-radius:18px;
      box-shadow:var(--shadow);
    }
    .modalhead{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px; padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,0.10);
    }
    .modalhead h3{ margin:0; font-size:16px; }
    .modalclose{
      background:transparent; border:none; color:#fff;
      font-size:20px; cursor:pointer; padding:6px 10px;
    }
    .modalbody{ padding:14px 16px 16px; }
    iframe.swapframe{
      width:100%;
      height:min(72vh,680px);
      border:0;
      border-radius:14px;
      background:#fff;
    }
    .small{ font-size:12px; color: rgba(255,255,255,0.65); line-height:1.45; }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="topbar">
        <div class="brand">
          <img src="assets/logo.png" alt="TFPCOIN Logo" />
          <div>
            <h1>TFPCOIN</h1>
            <p>Polygon Token • Official Website</p>
          </div>
        </div>

        <div class="btnrow">
          <button class="btn primary" id="btnBuy">Buy TFPCOIN</button>
          <button class="btn" id="btnMerch">Kari’s Closet</button>
          <a class="btn" href="assets/TFPCOIN_Whitepaper.pdf" target="_blank" rel="noopener">Whitepaper</a>
          <button class="btn" id="btnConnect">Connect Wallet</button>
        </div>
      </div>

      <div class="hero">
        <h2>The Future of Digital Value</h2>
        <p>
          TFPCOIN is a Polygon-based token built for community, utility, and real-world digital commerce.
          Swap TFPCOIN instantly, view the contract, and shop official merch directly from this site.
        </p>

        <!-- ✅ Removed hardcoded "Network: Polygon" pill -->
        <div class="pillrow" style="margin-top:14px;">
          <span class="pill" id="pillWallet">Wallet: Not connected</span>
          <span class="pill" id="pillNetwork">Network: Not checked</span>
        </div>
      </div>
    </header>

    <div class="grid">
      <div class="card">
        <h3>Contract & Links</h3>
        <div class="muted">TFPCOIN Contract (Polygon)</div>
        <code id="tokenAddr">0xcEc2f2b98B98f5ac69E819C7EC3627162cF8C21B</code>

        <div class="btnrow" style="justify-content:flex-start; margin-top:12px;">
          <button class="btn" id="btnCopy">Copy Contract</button>
          <button class="btn" id="btnAddMM">Add TFPCOIN to MetaMask</button>
          <a class="btn" id="btnScan" target="_blank" rel="noopener">View on PolygonScan</a>
        </div>

        <div class="line"></div>

        <h3 style="margin-bottom:6px;">Merch Conversion</h3>
        <div class="muted">Jersey price: <b>$70</b></div>
        <div style="margin-top:8px;font-size:18px;font-weight:900;">
          ≈ <span id="tfpFor70">—</span> TFPCOIN
        </div>
        <div class="small">Updates from DexScreener when available.</div>
      </div>

      <div class="card">
        <h3>How to Buy TFPCOIN</h3>
        <ol class="list">
          <li>Click <b>Buy TFPCOIN</b> (top button).</li>
          <li>Connect MetaMask / wallet in the swap widget.</li>
          <li>Make sure you are on <b>Polygon</b> network.</li>
          <li>Swap <b>USDC → TFPCOIN</b>.</li>
        </ol>

        <div class="line"></div>

        <h3>Trust Indicators</h3>
        <div class="pillrow">
          <span class="pill good">Contract: Verified</span>
          <span class="pill good">Liquidity Lock: Verified</span>
          <span class="pill warn">Audit: Coming Soon</span>
        </div>
      </div>
    </div>

    <footer>© 2026 TFPCOIN. All Rights Reserved.</footer>
  </div>

  <!-- BUY TFPCOIN MODAL (UNISWAP) -->
  <div class="overlay" id="swapOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="swapTitle">
      <div class="modalhead">
        <h3 id="swapTitle">Buy TFPCOIN</h3>
        <button class="modalclose" id="swapClose" aria-label="Close">✕</button>
      </div>
      <div class="modalbody">
        <div class="small" style="margin-bottom:10px;">
          USDC → TFPCOIN on Polygon via Uniswap.
        </div>
        <iframe class="swapframe" id="swapFrame" title="Uniswap Swap" allow="clipboard-write; encrypted-media; fullscreen"></iframe>
      </div>
    </div>
  </div>

  <!-- MERCH MODAL (SHOPIFY) -->
  <div class="overlay" id="merchOverlay" aria-hidden="true" style="z-index:10000;">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="merchTitle">
      <div class="modalhead">
        <h3 id="merchTitle">Kari’s Closet</h3>
        <button class="modalclose" id="merchClose" aria-label="Close">✕</button>
      </div>
      <div class="modalbody">
        <div class="small" style="margin-bottom:10px;">Secure checkout powered by Shopify.</div>
        <div style="display:flex;justify-content:center;flex-wrap:wrap;">
          <div id="product-component-1769653146260"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ====== CONFIG ======
    const TFPCOIN = { address: "0xcEc2f2b98B98f5ac69E819C7EC3627162cF8C21B", symbol: "TFP", decimals: 18 };

    // Polygon chainId
    const POLYGON = {
      chainIdHex: "0x89",
      chainName: "Polygon Mainnet",
      nativeCurrency: { name: "POL", symbol: "POL", decimals: 18 },
      rpcUrls: ["https://polygon-rpc.com/"],
      blockExplorerUrls: ["https://polygonscan.com/"]
    };

    // USDC on Polygon (native)
    const USDC_POLYGON = "0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359";

    // Links
    document.getElementById("btnScan").href = "https://polygonscan.com/token/" + TFPCOIN.address;

    // ====== MODALS ======
    const swapOverlay = document.getElementById("swapOverlay");
    const merchOverlay = document.getElementById("merchOverlay");
    const swapFrame = document.getElementById("swapFrame");

    // ✅ Uniswap swap pre-filled USDC → TFPCOIN on Polygon
    const UNISWAP_URL =
      "https://app.uniswap.org/#/swap" +
      "?chain=polygon" +
      "&inputCurrency=" + encodeURIComponent(USDC_POLYGON) +
      "&outputCurrency=" + encodeURIComponent(TFPCOIN.address);

    function openSwap(){
      swapFrame.src = UNISWAP_URL;
      swapOverlay.classList.add("open");
      swapOverlay.setAttribute("aria-hidden","false");
      document.body.style.overflow = "hidden";
    }
    function closeSwap(){
      swapOverlay.classList.remove("open");
      swapOverlay.setAttribute("aria-hidden","true");
      document.body.style.overflow = "";
      swapFrame.src = "";
    }

    function openMerch(){
      merchOverlay.classList.add("open");
      merchOverlay.setAttribute("aria-hidden","false");
      document.body.style.overflow = "hidden";
      renderShopifyOnce();
    }
    function closeMerch(){
      merchOverlay.classList.remove("open");
      merchOverlay.setAttribute("aria-hidden","true");
      document.body.style.overflow = "";
    }

    document.getElementById("btnBuy").addEventListener("click", openSwap);
    document.getElementById("swapClose").addEventListener("click", closeSwap);
    swapOverlay.addEventListener("click", (e)=>{ if(e.target===swapOverlay) closeSwap(); });

    document.getElementById("btnMerch").addEventListener("click", openMerch);
    document.getElementById("merchClose").addEventListener("click", closeMerch);
    merchOverlay.addEventListener("click", (e)=>{ if(e.target===merchOverlay) closeMerch(); });

    document.addEventListener("keydown", (e)=>{
      if(e.key==="Escape"){
        if(swapOverlay.classList.contains("open")) closeSwap();
        if(merchOverlay.classList.contains("open")) closeMerch();
      }
    });

    // ====== WALLET CONNECT + NETWORK ======
    async function getChainId(){
      if(!window.ethereum) return null;
      return await window.ethereum.request({ method: "eth_chainId" });
    }

    async function checkNetworkPill(){
      const pill = document.getElementById("pillNetwork");
      if(!window.ethereum){
        pill.textContent = "Network: No wallet";
        pill.className = "pill warn";
        return;
      }
      const chainId = await getChainId();
      if(chainId === POLYGON.chainIdHex){
        pill.textContent = "Network: Polygon ✅";
        pill.className = "pill good";
      } else {
        pill.textContent = "Network: Wrong network";
        pill.className = "pill warn";
      }
    }

    async function connectWallet(){
      if(!window.ethereum) return alert("MetaMask not detected. Please install MetaMask.");
      try{
        const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
        const addr = accounts?.[0];
        if(addr){
          const pill = document.getElementById("pillWallet");
          pill.textContent = "Wallet: " + addr.slice(0,6) + "..." + addr.slice(-4);
          pill.className = "pill good";
        }
        await checkNetworkPill();
      } catch(e){
        alert("Connection request rejected.");
      }
    }
    document.getElementById("btnConnect").addEventListener("click", connectWallet);

    // Copy + Add Token
    document.getElementById("btnCopy").addEventListener("click", async ()=>{
      try{ await navigator.clipboard.writeText(TFPCOIN.address); alert("Contract copied!"); }
      catch(e){ alert("Copy failed. Please copy manually."); }
    });

    document.getElementById("btnAddMM").addEventListener("click", async ()=>{
      if(!window.ethereum) return alert("MetaMask not detected.");
      try{
        await window.ethereum.request({
          method: "wallet_watchAsset",
          params: { type: "ERC20", options: TFPCOIN }
        });
      } catch(e){
        alert("Could not add token. Make sure you're connected to MetaMask.");
      }
    });

    // ====== Shopify render ONCE ======
    let shopifyMounted = false;
    function renderShopifyOnce() {
      if (shopifyMounted) return;

      const mountNode = document.getElementById("product-component-1769653146260");
      if (!mountNode) return;

      const scriptURL = "https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js";

      function mount() {
        const client = ShopifyBuy.buildClient({
          domain: "z4qefk-85.myshopify.com",
          storefrontAccessToken: "31f257118ca68b69b2444216cdeb80d7",
        });

        ShopifyBuy.UI.onReady(client).then(function (ui) {
          ui.createComponent("product", {
            id: "10360105107758",
            node: mountNode,
            moneyFormat: "%24%7B%7Bamount%7D%7D",
            options: { product: { buttonDestination: "checkout" } }
          });
          shopifyMounted = true;
        });
      }

      if (window.ShopifyBuy && window.ShopifyBuy.UI) {
        mount();
      } else {
        const s = document.createElement("script");
        s.async = true;
        s.src = scriptURL;
        s.onload = mount;
        document.head.appendChild(s);
      }
    }

    // Initial
    checkNetworkPill();
    if(window.ethereum){
      window.ethereum.on?.("chainChanged", ()=>checkNetworkPill());
    }
  </script>
</body>
</html>
